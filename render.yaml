services:
  - type: web
    name: timetablebot-telegram-bot
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python telegram_sender.py
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: MONGODB_URI
        sync: false

  - type: worker
    name: timetablebot-daily
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python main.py
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: MONGODB_URI
        sync: false
    schedule: "CRON 30 1 * * *" # 7:50 AM IST (2:20 UTC) daily

  - type: worker
    name: timetablebot-hourly
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python hourly_reminder.py
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: MONGODB_URI
        sync: false
    schedule: "CRON */5 3-10 * * *" # Every 5 min, 3:00-10:59 UTC (8:30-16:29 IST)